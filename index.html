<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RLC Bingo Manager v11.0.4</title>
    <link rel="manifest" href="manifest.json">
    <style>
        .status-online { color: green; }
        .status-offline { color: red; }
        .wizard-step { display: inline-block; padding: 10px; margin: 5px; border: 1px solid #ccc; }
        .wizard-step.active { background: #007bff; color: white; }
        .wizard-step.completed { background: #28a745; color: white; }
        .step-content { display: none; padding: 20px; }
    </style>
</head>
<body>
    <div id="app">
        <header>
            <h1>RLC Bingo Manager</h1>
            <span id="onlineStatus">Checking...</span>
        </header>

        <div class="wizard-container">
            <div class="wizard-steps">
                <div class="wizard-step">Session Info</div>
                <div class="wizard-step">Paper Sales</div>
                <div class="wizard-step">Game Results</div>
                <div class="wizard-step">Pull-Tabs</div>
                <div class="wizard-step">Money Count</div>
                <div class="wizard-step">Review</div>
            </div>
            
            <h2 id="stepTitle">Session Info</h2>
            
            <div class="wizard-content">
                <!-- Step content will be dynamically loaded here -->
            </div>
            
            <div class="wizard-navigation">
                <button id="prevStepBtn">Previous</button>
                <button id="nextStepBtn">Next</button>
            </div>
        </div>
    </div>

    <!-- Load existing working modules first -->
    <script src="js/config.js"></script>
    <script src="js/sync.js"></script>
    <script src="js/offline.js"></script>
    
    <!-- Load BingoApp module -->
    <script src="js/modules/BingoApp.js"></script>
    
    <!-- Initialize application -->
    <script>
        // Wait for all scripts to load
        window.addEventListener('DOMContentLoaded', function() {
            try {
                // Verify BingoApp is available
                if (typeof BingoApp === 'undefined') {
                    throw new Error('BingoApp module failed to load');
                }
                
                // Create and initialize the app
                window.bingoApp = new BingoApp({
                    version: '11.0.4'
                });
                
                console.log('RLC Bingo Manager started successfully');
                
            } catch (error) {
                console.error('Failed to start application:', error);
                document.getElementById('app').innerHTML = 
                    '<div class="error">Failed to load application. Please refresh the page.</div>';
            }
        });
        
        // Register service worker for offline functionality
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(reg => console.log('Service Worker registered'))
                .catch(err => console.error('Service Worker registration failed:', err));
        }
    </script>
</body>
</html>
