<!DOCTYPE html>
<html>
<head>
    <title>Clear RLC Bingo Cache</title>
</head>
<body>
    <h1>Clearing RLC Bingo Cache...</h1>
    <div id="status">Working...</div>

    <script>
    async function clearCache() {
        const statusDiv = document.getElementById('status');

        try {
            // Clear all caches
            const cacheNames = await caches.keys();
            for (const cacheName of cacheNames) {
                if (cacheName.includes('rlc-bingo')) {
                    await caches.delete(cacheName);
                    console.log('Deleted cache:', cacheName);
                }
            }

            // Unregister service worker
            if ('serviceWorker' in navigator) {
                const registrations = await navigator.serviceWorker.getRegistrations();
                for (const registration of registrations) {
                    if (registration.scope.includes('rlc-bingo-manager')) {
                        await registration.unregister();
                        console.log('Unregistered service worker:', registration.scope);
                    }
                }
            }

            statusDiv.innerHTML = `
                <h2>✅ Cache Cleared Successfully!</h2>
                <p>Deleted ${cacheNames.length} cache entries</p>
                <p><strong>Please close this tab and refresh the main app</strong></p>
                <button onclick="window.close()">Close Tab</button>
            `;

        } catch (error) {
            statusDiv.innerHTML = `
                <h2>❌ Error Clearing Cache</h2>
                <p>${error.message}</p>
                <button onclick="location.reload()">Retry</button>
            `;
        }
    }

    // Run immediately
    clearCache();
    </script>
</body>
</html>